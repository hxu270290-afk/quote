<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Iframe Test – Button & postMessage</title>
</head>
<body>
  <button id="quoteButton">Test Pay Button</button>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const quoteButton = document.getElementById('quoteButton');

      if (!quoteButton) {
        console.error('No element with id="quoteButton" found in iframe.');
        return;
      }

      quoteButton.addEventListener('click', (e) => {
        e.preventDefault();
        alert('Button clicked inside iframe (minimal test)');

        // Debug message to verify iframe → parent communication
        window.parent.postMessage({
          type: 'TEST_FROM_IFRAME',
          data: { time: Date.now() }
        }, '*');

        // Example quote confirmation payload
        window.parent.postMessage({
          type: 'QUOTE_CONFIRMED',
          data: {
            jobId: 'TEST-' + Date.now(),
            currency: 'GBP',
            totalPrice: 12.34,
            weightGrams: 100
          }
        }, '*');
      });
    });
  </script>
</body>
</html>
